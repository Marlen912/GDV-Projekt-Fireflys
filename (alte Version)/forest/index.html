<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>index.html</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<style type="text/css">
<!--
body {color: #000000; background-color: #ffffff; font-family: Monospaced}
pre {color: #000000; background-color: #ffffff; font-family: Monospaced}
table {color: #000000; background-color: #e9e8e2; font-family: Monospaced}
.argument {color: #009900}
.block-comment {color: #969696}
.ST4 {background-color: #e3f2e1; font-family: Monospaced; font-weight: bold}
.ST1 {background-color: #e3f2e1}
.ST2 {color: #007c00; background-color: #e3f2e1}
.ST5 {color: #969696; background-color: #e3f2e1}
.ST6 {color: #9f0d79; background-color: #e3f2e1}
.ST7 {color: #0000e6; background-color: #e3f2e1}
.ST0 {color: #628fb5; background-color: #e9eff8}
.tag {color: #0000e6}
.ST8 {color: #ce7b00; background-color: #e3f2e1}
.value {color: #ce7b00}
.highlight-caret-row {background-color: #e9eff8}
.ST3 {color: #0000ff; background-color: #e3f2e1; font-family: Monospaced; font-style: italic}
-->
</style>
</head>
<body>
<table width="100%"><tr><td align="center">C:\Users\test\Documents\NetBeansProjects\forest\public_html\index.html</td></tr></table>
<pre>
<span class="ST0">&lt;!DOCTYPE</span> <span class="ST0">html</span><span class="ST0">&gt;</span>
<span class="tag">&lt;</span><span class="tag">html</span><span class="tag">&gt;</span>
        <span class="tag">&lt;</span><span class="tag">head</span><span class="tag">&gt;</span>
                <span class="tag">&lt;</span><span class="tag">meta</span> <span class="argument">http-equiv</span><span class="argument">=</span><span class="value">&#39;Content-Type&#39;</span> <span class="argument">content</span><span class="argument">=</span><span class="value">&#39;text/html;charset=UTF-8&#39;</span><span class="tag">&gt;</span><span class="tag">&lt;/</span><span class="tag">meta</span>
                <span class="tag">&lt;</span><span class="tag">link</span> <span class="argument">rel</span><span class="argument">=</span><span class="value">&#39;stylesheet&#39;</span> <span class="argument">type</span><span class="argument">=</span><span class="value">&#39;text/css&#39;</span> <span class="argument">href</span><span class="argument">=</span><span class="value">&#39;</span><span class="value">http://www.x3dom.org/x3dom/release/x3dom.css</span><span class="value">&#39;</span><span class="tag">&gt;</span><span class="tag">&lt;/</span><span class="tag">link</span><span class="tag">&gt;</span>
                <span class="tag">&lt;</span><span class="tag">script</span> <span class="argument">type</span><span class="argument">=</span><span class="value">&#39;text/javascript&#39;</span> <span class="argument">src</span><span class="argument">=</span><span class="value">&#39;</span><span class="value">http://www.x3dom.org/x3dom/release/x3dom.js</span><span class="value">&#39;</span><span class="tag">&gt;</span><span class="tag">&lt;/</span><span class="tag">script</span><span class="tag">&gt;</span>
                <span class="tag">&lt;</span><span class="tag">style</span> <span class="argument">type</span><span class="argument">=</span><span class="value">&quot;text/css&quot;</span><span class="tag">&gt;</span>  
                <span class="ST2">#trans</span> <span class="ST1">{</span> <span class="ST3">-webkit-animation</span><span class="ST1">:</span> <span class="ST1">spin</span> <span class="ST1">8s</span> <span class="ST1">infinite</span> <span class="ST1">linear</span><span class="ST1">;</span>  <span class="ST1">}</span>  
                <span class="ST4">@-webkit-keyframes</span> <span class="ST1">spin</span> <span class="ST1">{</span>   
                        <span class="ST1">from</span> <span class="ST1">{</span> <span class="ST3">-webkit-transform</span><span class="ST1">:</span> <span class="ST1">rotateY</span><span class="ST1">(</span><span class="ST1">0</span><span class="ST1">)</span><span class="ST1">;</span> <span class="ST1">}</span>    
                        <span class="ST1">to</span> <span class="ST1">{</span> <span class="ST3">-webkit-transform</span><span class="ST1">:</span> <span class="ST1">rotateY</span><span class="ST1">(</span><span class="ST1">-</span><span class="ST1">360deg</span><span class="ST1">)</span><span class="ST1">;</span> <span class="ST1">}</span>  
                <span class="ST1">}</span>
                <span class="tag">&lt;/</span><span class="tag">style</span><span class="tag">&gt;</span>
        <span class="tag">&lt;/</span><span class="tag">head</span><span class="tag">&gt;</span>
        <span class="tag">&lt;</span><span class="tag">body</span><span class="tag">&gt;</span>
        <span class="block-comment">&lt;!-- X3D content starts here --&gt;</span>
                <span class="block-comment">&lt;!-- Set resolution (width=&#39;100%&#39; height=&#39;50%&#39; is also possible)--&gt;</span>
                <span class="tag">&lt;</span><span class="tag">x3d</span> <span class="argument">id</span><span class="argument">=</span><span class="value">&#39;</span><span class="ST2">someUniqueId</span><span class="value">&#39;</span> <span class="argument">showLog</span><span class="argument">=</span><span class="value">&#39;false&#39;</span> <span class="argument">width</span><span class="argument">=</span><span class="value">&#39;1024&#39;</span> <span class="argument">height</span><span class="argument">=</span><span class="value">&#39;768&#39;</span> <span class="argument">order</span><span class="argument">=</span><span class="value">&#39;0&#39;</span><span class="tag">&gt;</span>
                        <span class="tag">&lt;</span><span class="tag">scene</span><span class="tag">&gt;</span>
                                <span class="block-comment">&lt;!-- Set viewpoint (camera position and view distance zNear, zFar) --&gt;</span>
                                <span class="tag">&lt;</span><span class="tag">Viewpoint</span> <span class="argument">id</span><span class="argument">=</span><span class="value">&#39;</span><span class="ST2">vpp</span><span class="value">&#39;</span> <span class="argument">DEF</span><span class="argument">=</span><span class="value">&#39;vp&#39;</span> <span class="argument">centerOfRotation</span><span class="argument">=</span><span class="value">&quot;0 0 0&quot;</span> <span class="argument">position</span><span class="argument">=</span><span class="value">&quot;0 0 30&quot;</span> <span class="argument">orientation</span><span class="argument">=</span><span class="value">&quot;0 0 0 0&quot;</span> <span class="argument">zNear</span><span class="argument">=</span><span class="value">&quot;0.01&quot;</span> <span class="argument">zFar</span><span class="argument">=</span><span class="value">&quot;1000&quot;</span><span class="tag">&gt;</span><span class="tag">&lt;/</span><span class="tag">Viewpoint</span><span class="tag">&gt;</span> 
                                
                                <span class="block-comment">&lt;!-- Background of the scene (world, sky)  --&gt;</span>
                                <span class="tag">&lt;</span><span class="tag">background</span> <span class="argument">DEF</span><span class="argument">=</span><span class="value">&#39;WO_World&#39;</span> <span class="argument">groundColor</span><span class="argument">=</span><span class="value">&#39;0.057 0.221 0.4&#39;</span> <span class="argument">skyColor</span><span class="argument">=</span><span class="value">&#39;0.057 0.221 0.4&#39;</span><span class="tag">&gt;</span><span class="tag">&lt;/</span><span class="tag">background</span><span class="tag">&gt;</span>
                                
                                <span class="block-comment">&lt;!-- Target element for trees --&gt;</span>
                                <span class="tag">&lt;</span><span class="tag">group</span> <span class="argument">id</span><span class="argument">=</span><span class="value">&quot;</span><span class="ST2">trees</span><span class="value">&quot;</span><span class="tag">&gt;</span>
                                <span class="tag">&lt;/</span><span class="tag">group</span><span class="tag">&gt;</span>

                                                <span class="tag">&lt;/</span><span class="tag">IndexedLineSet</span><span class="tag">&gt;</span>
                                        <span class="tag">&lt;/</span><span class="tag">shape</span><span class="tag">&gt;</span>
                                <span class="tag">&lt;/</span><span class="tag">transform</span><span class="tag">&gt;</span> 
                                
                                <span class="block-comment">&lt;!-- Ground: a textured plane (2d square/rectangle).</span>
                                 <span class="block-comment">Textures can used via http url or file path.</span>
                             <span class="block-comment">Local files are stored the html file folder.--&gt;</span>
                                <span class="block-comment">&lt;!--&lt;transform scale=&#39;125 125 0&#39;&gt;</span>
                                        <span class="block-comment">&lt;shape&gt;</span>
                                                <span class="block-comment">&lt;appearance&gt;</span>
                                                        <span class="block-comment">&lt;imageTexture url=&#39;ground.png&#39;&gt;&lt;/imageTexture&gt;</span>
                                                <span class="block-comment">&lt;/appearance&gt;</span>
                                                <span class="block-comment">&lt;Plane ccw=&#39;true&#39; center=&#39;0,0,0&#39; lit=&#39;false&#39; metadata=&#39;X3DMetadataObject&#39;</span> 
                                                       <span class="block-comment">primType=&#39;[&#39;TRIANGLES&#39;]&#39; size=&#39;2,2&#39; solid=&#39;true&#39; subdivision=&#39;1,1&#39;</span> 
                                                           <span class="block-comment">useGeoCache=&#39;true&#39; &gt;&lt;/Plane&gt;</span> 
                                                <span class="block-comment">&lt;/IndexedLineSet&gt;</span>
                                        <span class="block-comment">&lt;/shape&gt;</span>
                                <span class="block-comment">&lt;/transform&gt;</span>
                                <span class="block-comment">--&gt;</span>
                                
                                <span class="tag">&lt;</span><span class="tag">Transform</span> <span class="argument">translation</span><span class="argument">=</span><span class="value">&#39;0 0 0&#39;</span> <span class="argument">scale</span><span class="argument">=</span><span class="value">&#39;100 100 0&#39;</span> <span class="tag">&gt;</span>
                                        <span class="tag">&lt;</span><span class="tag">Shape</span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;</span><span class="tag">Appearance</span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;</span><span class="tag">imageTexture</span> <span class="argument">url</span><span class="argument">=</span><span class="value">&#39;ground.jpg&#39;</span><span class="tag">&gt;</span><span class="tag">&lt;/</span><span class="tag">imageTexture</span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;/</span><span class="tag">Appearance</span><span class="tag">&gt;</span>
                        <span class="tag">&lt;</span><span class="tag">IndexedFaceSet</span> <span class="argument">solid</span><span class="argument">=</span><span class="value">&quot;false&quot;</span> <span class="argument">coordIndex</span><span class="argument">=</span><span class="value">&#39;0 2 3 0 1 2&#39;</span><span class="tag">&gt;</span>  <span class="block-comment">&lt;!-- 0 1 2 3 -1 --&gt;</span>
                            <span class="tag">&lt;</span><span class="tag">Coordinate</span> <span class="argument">point</span><span class="argument">=</span><span class="value">&#39;-1 -1 0 1 -1 0 1 1 0 -1 1 0&#39;</span><span class="tag">&gt;</span><span class="tag">&lt;/</span><span class="tag">Coordinate</span><span class="tag">&gt;</span> 
                        <span class="tag">&lt;/</span><span class="tag">IndexedFaceSet</span> <span class="tag">&gt;</span>
                                        <span class="tag">&lt;/</span><span class="tag">Shape</span><span class="tag">&gt;</span>
                                <span class="tag">&lt;/</span><span class="tag">Transform</span><span class="tag">&gt;</span> 
                                
                                <span class="block-comment">&lt;!-- First fireflie --&gt;</span>
                                <span class="tag">&lt;</span><span class="tag">transform</span> <span class="argument">translation</span><span class="argument">=</span><span class="value">&quot;-10 0 0&quot;</span> <span class="argument">scale</span><span class="argument">=</span><span class="value">&quot;2.5 2.5 2.5&quot;</span> <span class="argument">rotation</span><span class="argument">=</span><span class="value">&quot;1 0 0 1.57&quot;</span><span class="tag">&gt;</span>
                                        <span class="tag">&lt;</span><span class="tag">inline</span> <span class="argument">url</span><span class="argument">=</span><span class="value">&quot;Fireflie.x3d&quot;</span><span class="tag">&gt;</span><span class="tag">&lt;/</span><span class="tag">inline</span><span class="tag">&gt;</span>
                                <span class="tag">&lt;/</span><span class="tag">transform</span><span class="tag">&gt;</span>
                                
                                <span class="block-comment">&lt;!-- Second fireflie --&gt;</span>
                                <span class="tag">&lt;</span><span class="tag">transform</span> <span class="argument">translation</span><span class="argument">=</span><span class="value">&quot;20 -10 0&quot;</span> <span class="argument">scale</span><span class="argument">=</span><span class="value">&quot;2.5 2.5 2.5&quot;</span> <span class="argument">rotation</span><span class="argument">=</span><span class="value">&quot;1 0 0 1.57&quot;</span><span class="tag">&gt;</span>
                                <span class="tag">&lt;</span><span class="tag">transform</span> <span class="argument">rotation</span><span class="argument">=</span><span class="value">&quot;0 1 0 1.7&quot;</span><span class="tag">&gt;</span>
                                        <span class="tag">&lt;</span><span class="tag">inline</span> <span class="argument">url</span><span class="argument">=</span><span class="value">&quot;Fireflie.x3d&quot;</span><span class="tag">&gt;</span><span class="tag">&lt;/</span><span class="tag">inline</span><span class="tag">&gt;</span>
                                <span class="tag">&lt;/</span><span class="tag">transform</span><span class="tag">&gt;</span>
                                <span class="tag">&lt;/</span><span class="tag">transform</span><span class="tag">&gt;</span>
                                
                                <span class="block-comment">&lt;!-- Third fireflie --&gt;</span>
                                <span class="tag">&lt;</span><span class="tag">transform</span> <span class="argument">translation</span><span class="argument">=</span><span class="value">&quot;-33 12 0&quot;</span> <span class="argument">scale</span><span class="argument">=</span><span class="value">&quot;2.5 2.5 2.5&quot;</span> <span class="argument">rotation</span><span class="argument">=</span><span class="value">&quot;1 0 0 1.57&quot;</span><span class="tag">&gt;</span>
                                <span class="tag">&lt;</span><span class="tag">transform</span> <span class="argument">rotation</span><span class="argument">=</span><span class="value">&quot;0 1 0 2.7&quot;</span><span class="tag">&gt;</span>
                                        <span class="tag">&lt;</span><span class="tag">inline</span> <span class="argument">url</span><span class="argument">=</span><span class="value">&quot;Fireflie.x3d&quot;</span><span class="tag">&gt;</span><span class="tag">&lt;/</span><span class="tag">inline</span><span class="tag">&gt;</span>
                                <span class="tag">&lt;/</span><span class="tag">transform</span><span class="tag">&gt;</span>
                                <span class="tag">&lt;/</span><span class="tag">transform</span><span class="tag">&gt;</span>
                                
                                <span class="block-comment">&lt;!-- Fourth fireflie --&gt;</span>
                                <span class="tag">&lt;</span><span class="tag">transform</span> <span class="argument">translation</span><span class="argument">=</span><span class="value">&quot;45 30 0&quot;</span> <span class="argument">scale</span><span class="argument">=</span><span class="value">&quot;2.5 2.5 2.5&quot;</span> <span class="argument">rotation</span><span class="argument">=</span><span class="value">&quot;1 0 0 1.57&quot;</span><span class="tag">&gt;</span>
                                <span class="tag">&lt;</span><span class="tag">transform</span> <span class="argument">rotation</span><span class="argument">=</span><span class="value">&quot;0 1 0 0.7&quot;</span><span class="tag">&gt;</span>
                                        <span class="tag">&lt;</span><span class="tag">inline</span> <span class="argument">url</span><span class="argument">=</span><span class="value">&quot;Fireflie.x3d&quot;</span><span class="tag">&gt;</span><span class="tag">&lt;/</span><span class="tag">inline</span><span class="tag">&gt;</span>
                                <span class="tag">&lt;/</span><span class="tag">transform</span><span class="tag">&gt;</span>
                                <span class="tag">&lt;/</span><span class="tag">transform</span><span class="tag">&gt;</span>
                                
                                <span class="block-comment">&lt;!-- JavaScript content starts here (content can be manipulated during runtime) --&gt;</span>
                                <span class="tag">&lt;</span><span class="tag">script</span> <span class="argument">type</span><span class="argument">=</span><span class="value">&quot;text/javascript&quot;</span><span class="tag">&gt;</span>
                                
                                <span class="ST5">// Call this function to initialize the forest when calling the html document</span>
                                <span class="ST6">document</span><span class="ST1">.</span><span class="ST4">onload</span> <span class="ST1">=</span> <span class="ST7">function</span><span class="ST1">(</span><span class="ST1">)</span><span class="ST1">{</span>
                                <span class="ST5">// Create whole forest</span>
                                        <span class="ST1">createForest</span><span class="ST1">(</span><span class="ST1">)</span><span class="ST1">;</span>
                                        
                                        <span class="ST5">// Stop/Start fireflies (click on the tree)</span>
                                        <span class="ST6">document</span><span class="ST1">.</span><span class="ST1">getElementById</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">completefireflies</span><span class="ST8">&#39;</span><span class="ST1">)</span><span class="ST1">.</span><span class="ST1">addEventListener</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">click</span><span class="ST8">&#39;</span><span class="ST1">,</span> <span class="ST7">function</span><span class="ST1">(</span><span class="ST1">)</span><span class="ST1">{</span>
                                                <span class="ST6">document</span><span class="ST1">.</span><span class="ST1">getElementById</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">timesensor</span><span class="ST8">&#39;</span><span class="ST1">)</span><span class="ST1">.</span><span class="ST1">setAttribute</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">loop</span><span class="ST8">&#39;</span><span class="ST1">,</span> <span class="ST8">&#39;</span><span class="ST8">false</span><span class="ST8">&#39;</span><span class="ST1">)</span><span class="ST1">;</span>
                                        <span class="ST1">}</span><span class="ST1">,</span> <span class="ST7">false</span><span class="ST1">)</span><span class="ST1">}</span><span class="ST1">;</span>
                                        
                                <span class="ST5">// Function to create a trunk (params: random x and y position)</span>
                                <span class="ST7">function</span> <span class="ST4">createCylinder</span><span class="ST1">(</span><span class="ST1">xPos</span><span class="ST1">,</span> <span class="ST1">yPos</span><span class="ST1">)</span><span class="ST1">{</span>
                                        <span class="ST5">// Get the target node</span>
                                        <span class="ST7">var</span> <span class="ST1">group</span> <span class="ST1">=</span> <span class="ST6">document</span><span class="ST1">.</span><span class="ST1">getElementById</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">trees</span><span class="ST8">&#39;</span><span class="ST1">)</span><span class="ST1">;</span>
                                        
                                        <span class="ST5">// Create transform node to apply the random position and other transformations</span>
                                        <span class="ST7">var</span> <span class="ST1">transCy</span> <span class="ST1">=</span> <span class="ST6">document</span><span class="ST1">.</span><span class="ST1">createElement</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">transform</span><span class="ST8">&#39;</span><span class="ST1">)</span><span class="ST1">;</span>
                                        <span class="ST5">// Set id attribute for the translation node</span>
                                        <span class="ST1">transCy</span><span class="ST1">.</span><span class="ST1">setAttribute</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">id</span><span class="ST8">&#39;</span><span class="ST1">,</span> <span class="ST8">&#39;</span><span class="ST8">transCy</span><span class="ST8">&#39;</span><span class="ST1">)</span><span class="ST1">;</span>
                                        
                                        <span class="ST5">// Define the final translation</span>
                                        <span class="ST7">var</span> <span class="ST1">finTrans</span> <span class="ST1">=</span> <span class="ST1">xPos</span> <span class="ST1">+</span> <span class="ST8">&#39;</span> <span class="ST8">&#39;</span> <span class="ST1">+</span> <span class="ST1">yPos</span> <span class="ST1">+</span> <span class="ST8">&#39;</span><span class="ST8"> 2.5</span><span class="ST8">&#39;</span><span class="ST1">;</span>
                                        <span class="ST5">// Set the translation</span>
                                        <span class="ST1">transCy</span><span class="ST1">.</span><span class="ST1">setAttribute</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">translation</span><span class="ST8">&#39;</span><span class="ST1">,</span> <span class="ST1">finTrans</span> <span class="ST1">)</span><span class="ST1">;</span>
                                        <span class="ST5">// Set the scale (size)</span>
                                        <span class="ST1">transCy</span><span class="ST1">.</span><span class="ST1">setAttribute</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">scale</span><span class="ST8">&#39;</span><span class="ST1">,</span> <span class="ST8">&#39;</span><span class="ST8">1 5 1</span><span class="ST8">&#39;</span><span class="ST1">)</span><span class="ST1">;</span>
                                        <span class="ST5">// Set rotation on X for 180° (or half pi) to straighten the trunk</span>
                                        <span class="ST1">transCy</span><span class="ST1">.</span><span class="ST1">setAttribute</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">rotation</span><span class="ST8">&#39;</span><span class="ST1">,</span> <span class="ST8">&#39;</span><span class="ST8">1 0 0 1.57</span><span class="ST8">&#39;</span><span class="ST1">)</span><span class="ST1">;</span>
                                        
                                        <span class="ST5">// Create shape node</span>
                                        <span class="ST7">var</span> <span class="ST1">shapeCy</span> <span class="ST1">=</span> <span class="ST6">document</span><span class="ST1">.</span><span class="ST1">createElement</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">shape</span><span class="ST8">&#39;</span><span class="ST1">)</span><span class="ST1">;</span>
                                        
                                        <span class="ST5">// Create appearance node</span>
                                        <span class="ST7">var</span> <span class="ST1">appearCy</span> <span class="ST1">=</span> <span class="ST6">document</span><span class="ST1">.</span><span class="ST1">createElement</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">appearance</span><span class="ST8">&#39;</span><span class="ST1">)</span><span class="ST1">;</span>

                                        <span class="ST5">// Crteate material node</span>
                                        <span class="ST7">var</span> <span class="ST1">matCy</span> <span class="ST1">=</span> <span class="ST6">document</span><span class="ST1">.</span><span class="ST1">createElement</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">material</span><span class="ST8">&#39;</span><span class="ST1">)</span><span class="ST1">;</span>
                                        <span class="ST5">// And set color properties</span>
                                        <span class="ST1">matCy</span><span class="ST1">.</span><span class="ST1">setAttribute</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">diffuseColor</span><span class="ST8">&#39;</span><span class="ST1">,</span> <span class="ST8">&#39;</span><span class="ST8">brown</span><span class="ST8">&#39;</span><span class="ST1">)</span><span class="ST1">;</span>
                                        
                                        <span class="ST5">// Create the cylinder spezified by x3dom</span>
                                        <span class="ST7">var</span> <span class="ST1">cylinder</span> <span class="ST1">=</span> <span class="ST6">document</span><span class="ST1">.</span><span class="ST1">createElement</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">cylinder</span><span class="ST8">&#39;</span><span class="ST1">)</span><span class="ST1">;</span>
                                        <span class="ST5">// And set the properties for radius and height</span>
                                        <span class="ST1">cylinder</span><span class="ST1">.</span><span class="ST1">setAttribute</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">radius</span><span class="ST8">&#39;</span><span class="ST1">,</span> <span class="ST8">&#39;</span><span class="ST8">0.5</span><span class="ST8">&#39;</span><span class="ST1">)</span><span class="ST1">;</span>
                                        <span class="ST1">cylinder</span><span class="ST1">.</span><span class="ST1">setAttribute</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">height</span><span class="ST8">&#39;</span><span class="ST1">,</span> <span class="ST8">&#39;</span><span class="ST8">1.0</span><span class="ST8">&#39;</span><span class="ST1">)</span><span class="ST1">;</span>
                                        
                                        <span class="ST5">// Append all nodes to its parent. Remeber, root is the group with id = trees!</span>
                                        <span class="ST1">group</span><span class="ST1">.</span><span class="ST1">appendChild</span><span class="ST1">(</span><span class="ST1">transCy</span><span class="ST1">)</span><span class="ST1">;</span>
                                        <span class="ST1">transCy</span><span class="ST1">.</span><span class="ST1">appendChild</span><span class="ST1">(</span><span class="ST1">shapeCy</span><span class="ST1">)</span><span class="ST1">;</span>
                                        <span class="ST1">shapeCy</span><span class="ST1">.</span><span class="ST1">appendChild</span><span class="ST1">(</span><span class="ST1">appearCy</span><span class="ST1">)</span><span class="ST1">;</span>
                                        <span class="ST1">appearCy</span><span class="ST1">.</span><span class="ST1">appendChild</span><span class="ST1">(</span><span class="ST1">matCy</span><span class="ST1">)</span><span class="ST1">;</span>
                                        <span class="ST1">shapeCy</span><span class="ST1">.</span><span class="ST1">appendChild</span><span class="ST1">(</span><span class="ST1">cylinder</span><span class="ST1">)</span><span class="ST1">;</span>
                                <span class="ST1">}</span>
                                
                                <span class="ST5">/*</span> <span class="ST5">Function</span> <span class="ST5">to</span> <span class="ST5">create</span> <span class="ST5">the</span> <span class="ST5">top</span> <span class="ST5">for</span> <span class="ST5">a</span> <span class="ST5">trunk</span>
                                   <span class="ST5">params:</span> <span class="ST5">random</span> <span class="ST5">x</span> <span class="ST5">and</span> <span class="ST5">y</span> <span class="ST5">position</span><span class="ST5">,</span> <span class="ST5">random</span> <span class="ST5">scale</span> <span class="ST5">x</span> <span class="ST5">and</span> <span class="ST5">y)</span><span class="ST5">*/</span>
                                <span class="ST7">function</span> <span class="ST4">createCone</span><span class="ST1">(</span><span class="ST1">xPos</span><span class="ST1">,</span> <span class="ST1">yPos</span><span class="ST1">,</span> <span class="ST1">scaleX</span><span class="ST1">,</span> <span class="ST1">scaleY</span><span class="ST1">)</span><span class="ST1">{</span>
                                        <span class="ST5">// Get the target node</span>
                                        <span class="ST7">var</span> <span class="ST1">group</span> <span class="ST1">=</span> <span class="ST6">document</span><span class="ST1">.</span><span class="ST1">getElementById</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">trees</span><span class="ST8">&#39;</span><span class="ST1">)</span><span class="ST1">;</span>
                                        
                                        <span class="ST5">// Create transform node to apply the random position and scale</span>
                                        <span class="ST7">var</span> <span class="ST1">transCo</span> <span class="ST1">=</span> <span class="ST6">document</span><span class="ST1">.</span><span class="ST1">createElement</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">transform</span><span class="ST8">&#39;</span><span class="ST1">)</span><span class="ST1">;</span>
                                        <span class="ST5">// Set id attribute for the translation node</span>
                                        <span class="ST1">transCo</span><span class="ST1">.</span><span class="ST1">setAttribute</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">id</span><span class="ST8">&#39;</span><span class="ST1">,</span> <span class="ST8">&#39;</span><span class="ST8">transCo</span><span class="ST8">&#39;</span><span class="ST1">)</span><span class="ST1">;</span>
                                        
                                        <span class="ST5">// Define the final translation</span>
                                        <span class="ST7">var</span> <span class="ST1">finTrans</span> <span class="ST1">=</span> <span class="ST1">xPos</span> <span class="ST1">+</span> <span class="ST8">&#39;</span> <span class="ST8">&#39;</span> <span class="ST1">+</span> <span class="ST1">yPos</span> <span class="ST1">+</span> <span class="ST8">&#39;</span><span class="ST8"> 6.0</span><span class="ST8">&#39;</span><span class="ST1">;</span>
                                        <span class="ST5">// Set the translation</span>
                                        <span class="ST1">transCo</span><span class="ST1">.</span><span class="ST1">setAttribute</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">translation</span><span class="ST8">&#39;</span><span class="ST1">,</span> <span class="ST1">finTrans</span><span class="ST1">)</span><span class="ST1">;</span>
                                        <span class="ST5">// Define the final scale</span>
                                        <span class="ST7">var</span> <span class="ST1">finScale</span> <span class="ST1">=</span> <span class="ST1">scaleX</span> <span class="ST1">+</span> <span class="ST8">&#39;</span> <span class="ST8">&#39;</span> <span class="ST1">+</span> <span class="ST1">scaleY</span> <span class="ST1">+</span> <span class="ST8">&#39;</span> <span class="ST8">&#39;</span> <span class="ST1">+</span> <span class="ST1">scaleX</span><span class="ST1">;</span>
                                        <span class="ST5">// Set the scale</span>
                                        <span class="ST1">transCo</span><span class="ST1">.</span><span class="ST1">setAttribute</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">scale</span><span class="ST8">&#39;</span><span class="ST1">,</span> <span class="ST1">finScale</span><span class="ST1">)</span><span class="ST1">;</span>   <span class="ST5">// 2 4 2</span>
                                        <span class="ST5">// Set rotation on X for 180° (or half pi) to straighten the cone of the trunk</span>
                                        <span class="ST1">transCo</span><span class="ST1">.</span><span class="ST1">setAttribute</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">rotation</span><span class="ST8">&#39;</span><span class="ST1">,</span> <span class="ST8">&#39;</span><span class="ST8">1 0 0 1.57</span><span class="ST8">&#39;</span><span class="ST1">)</span><span class="ST1">;</span>
                                        
                                        <span class="ST5">// Create shape node</span>
                                        <span class="ST7">var</span> <span class="ST1">shapeCo</span> <span class="ST1">=</span> <span class="ST6">document</span><span class="ST1">.</span><span class="ST1">createElement</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">shape</span><span class="ST8">&#39;</span><span class="ST1">)</span><span class="ST1">;</span>
                                        
                                        <span class="ST5">// Create appearance node</span>
                                        <span class="ST7">var</span> <span class="ST1">appearCo</span> <span class="ST1">=</span> <span class="ST6">document</span><span class="ST1">.</span><span class="ST1">createElement</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">appearance</span><span class="ST8">&#39;</span><span class="ST1">)</span><span class="ST1">;</span>

                                        <span class="ST5">// Create material node</span>
                                        <span class="ST7">var</span> <span class="ST1">matCo</span> <span class="ST1">=</span> <span class="ST6">document</span><span class="ST1">.</span><span class="ST1">createElement</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">material</span><span class="ST8">&#39;</span><span class="ST1">)</span><span class="ST1">;</span>
                                        <span class="ST5">// And set color properties</span>
                                        <span class="ST1">matCo</span><span class="ST1">.</span><span class="ST1">setAttribute</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">diffuseColor</span><span class="ST8">&#39;</span><span class="ST1">,</span> <span class="ST8">&#39;</span><span class="ST8">green</span><span class="ST8">&#39;</span><span class="ST1">)</span><span class="ST1">;</span>
                                        
                                        <span class="ST5">// Create the cylinder spezified by x3dom</span>
                                        <span class="ST7">var</span> <span class="ST1">cone</span> <span class="ST1">=</span> <span class="ST6">document</span><span class="ST1">.</span><span class="ST1">createElement</span><span class="ST1">(</span><span class="ST8">&#39;</span><span class="ST8">cone</span><span class="ST8">&#39;</span><span class="ST1">)</span><span class="ST1">;</span>
                                        
                                        <span class="ST5">// Append all nodes to its parent. Remeber, root is the group with id = trees!</span>
                                        <span class="ST1">group</span><span class="ST1">.</span><span class="ST1">appendChild</span><span class="ST1">(</span><span class="ST1">transCo</span><span class="ST1">)</span><span class="ST1">;</span>
                                        <span class="ST1">transCo</span><span class="ST1">.</span><span class="ST1">appendChild</span><span class="ST1">(</span><span class="ST1">shapeCo</span><span class="ST1">)</span><span class="ST1">;</span>
                                        <span class="ST1">shapeCo</span><span class="ST1">.</span><span class="ST1">appendChild</span><span class="ST1">(</span><span class="ST1">appearCo</span><span class="ST1">)</span><span class="ST1">;</span>
                                        <span class="ST1">appearCo</span><span class="ST1">.</span><span class="ST1">appendChild</span><span class="ST1">(</span><span class="ST1">matCo</span><span class="ST1">)</span><span class="ST1">;</span>
                                        <span class="ST1">shapeCo</span><span class="ST1">.</span><span class="ST1">appendChild</span><span class="ST1">(</span><span class="ST1">cone</span><span class="ST1">)</span><span class="ST1">;</span>
                                <span class="ST1">}</span>
                                        
                                <span class="ST5">// Function to create multiple trees.</span>
                                <span class="ST7">function</span> <span class="ST4">createForest</span><span class="ST1">(</span><span class="ST1">)</span><span class="ST1">{</span>
                                        <span class="ST7">var</span> <span class="ST1">i</span><span class="ST1">,</span> <span class="ST1">xPos</span><span class="ST1">,</span> <span class="ST1">yPos</span><span class="ST1">,</span> <span class="ST1">scaleX</span><span class="ST1">,</span> <span class="ST1">scaleY</span><span class="ST1">;</span>
                                        
                                        <span class="ST5">// Max tree count</span>
                                        <span class="ST7">var</span> <span class="ST1">count</span> <span class="ST1">=</span> <span class="ST1">100</span><span class="ST1">;</span>
                                        
                                        <span class="ST5">// Max range for a single tree (position: range * random between 0 and 1)</span>
                                        <span class="ST7">var</span> <span class="ST1">range</span> <span class="ST1">=</span> <span class="ST1">200</span><span class="ST1">;</span>
                                        
                                        <span class="ST5">// Offset for each tree to center it</span> 
                                        <span class="ST7">var</span> <span class="ST1">offset</span> <span class="ST1">=</span> <span class="ST1">range</span> <span class="ST1">/</span> <span class="ST1">2</span><span class="ST1">;</span>

                                        <span class="ST5">// Create trees in a for loop and create for each tree a random position</span>
                                        <span class="ST7">for</span><span class="ST1">(</span><span class="ST1">i</span> <span class="ST1">=</span> <span class="ST1">0</span><span class="ST1">;</span> <span class="ST1">i</span> <span class="ST1">&lt;</span> <span class="ST1">count</span><span class="ST1">;</span> <span class="ST1">i</span><span class="ST1">++</span><span class="ST1">)</span>
                                        <span class="ST1">{</span>
                                                <span class="ST5">// Random x and y position</span>
                                                <span class="ST1">xPos</span> <span class="ST1">=</span> <span class="ST6">Math</span><span class="ST1">.</span><span class="ST1">floor</span><span class="ST1">(</span><span class="ST1">(</span><span class="ST6">Math</span><span class="ST1">.</span><span class="ST1">random</span><span class="ST1">(</span><span class="ST1">)</span> <span class="ST1">*</span> <span class="ST1">range</span><span class="ST1">)</span> <span class="ST1">+</span> <span class="ST1">1</span><span class="ST1">)</span> <span class="ST1">-</span> <span class="ST1">offset</span><span class="ST1">;</span>
                                                <span class="ST1">yPos</span> <span class="ST1">=</span> <span class="ST6">Math</span><span class="ST1">.</span><span class="ST1">floor</span><span class="ST1">(</span><span class="ST1">(</span><span class="ST6">Math</span><span class="ST1">.</span><span class="ST1">random</span><span class="ST1">(</span><span class="ST1">)</span> <span class="ST1">*</span> <span class="ST1">range</span><span class="ST1">)</span> <span class="ST1">+</span> <span class="ST1">1</span><span class="ST1">)</span> <span class="ST1">-</span> <span class="ST1">offset</span><span class="ST1">;</span>
                                                
                                                <span class="ST5">// Random x and y scale for the cones</span>
                                                <span class="ST1">scaleX</span> <span class="ST1">=</span> <span class="ST6">Math</span><span class="ST1">.</span><span class="ST1">floor</span><span class="ST1">(</span><span class="ST1">(</span><span class="ST6">Math</span><span class="ST1">.</span><span class="ST1">random</span><span class="ST1">(</span><span class="ST1">)</span> <span class="ST1">*</span> <span class="ST1">4</span><span class="ST1">)</span> <span class="ST1">+</span> <span class="ST1">2</span><span class="ST1">)</span><span class="ST1">;</span>
                                                <span class="ST1">scaleY</span> <span class="ST1">=</span> <span class="ST6">Math</span><span class="ST1">.</span><span class="ST1">floor</span><span class="ST1">(</span><span class="ST1">(</span><span class="ST6">Math</span><span class="ST1">.</span><span class="ST1">random</span><span class="ST1">(</span><span class="ST1">)</span> <span class="ST1">*</span> <span class="ST1">5</span><span class="ST1">)</span> <span class="ST1">+</span> <span class="ST1">1</span><span class="ST1">)</span><span class="ST1">;</span>
                                                
                                                <span class="ST5">// Trees should be placed around the left and right side of the axis origin,</span>
                                                <span class="ST5">// so we place every odd tree on the left and every even tree on the right side.</span>
                                                <span class="ST7">if</span><span class="ST1">(</span><span class="ST1">i</span> <span class="ST1">%</span> <span class="ST1">2</span> <span class="ST1">==</span> <span class="ST1">0</span><span class="ST1">)</span><span class="ST1">{</span>
                                                        <span class="ST1">xPos</span> <span class="ST1">*=</span> <span class="ST1">(</span><span class="ST1">-</span><span class="ST1">1</span><span class="ST1">)</span><span class="ST1">;</span>
                                                        <span class="ST1">yPos</span> <span class="ST1">*=</span> <span class="ST1">(</span><span class="ST1">-</span><span class="ST1">1</span><span class="ST1">)</span><span class="ST1">;</span>
                                                <span class="ST1">}</span>
                                                
                                                <span class="ST5">// Create trunk</span>
                                                <span class="ST1">createCylinder</span><span class="ST1">(</span><span class="ST1">xPos</span><span class="ST1">,</span> <span class="ST1">yPos</span><span class="ST1">)</span><span class="ST1">;</span>
                                                <span class="ST5">// Create cone</span>
                                                <span class="ST1">createCone</span><span class="ST1">(</span><span class="ST1">xPos</span><span class="ST1">,</span> <span class="ST1">yPos</span><span class="ST1">,</span> <span class="ST1">scaleX</span><span class="ST1">,</span> <span class="ST1">scaleY</span><span class="ST1">)</span><span class="ST1">;</span>
                                        <span class="ST1">}</span> <span class="ST5">// CLOSE FOR LOOP !!!</span>
                                <span class="ST1">}</span>
                                <span class="tag">&lt;/</span><span class="tag">script</span><span class="tag">&gt;</span> <span class="block-comment">&lt;!-- JavaScript ends here --&gt;</span>
                        <span class="tag">&lt;/</span><span class="tag">scene</span><span class="tag">&gt;</span>
                <span class="tag">&lt;/</span><span class="tag">x3d</span><span class="tag">&gt;</span> <span class="block-comment">&lt;!-- X3D ends here --&gt;</span>   
        <span class="tag">&lt;/</span><span class="tag">body</span><span class="tag">&gt;</span>
<span class="tag">&lt;/</span><span class="tag">html</span><span class="tag">&gt;</span>


</pre></body>
</html>
